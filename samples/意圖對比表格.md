# IELTS å¯«ä½œè¡åˆºæ•™ç·´ - æ„åœ–å°æ¯”è¡¨æ ¼

## æ–‡ä»¶ä¾†æº
å°æ¯” `intent1.md` (è¦æ ¼æ„åœ–) èˆ‡ `intent2.md` (ç¨‹å¼ç¢¼ç¾ç‹€)

---

## ğŸ”´ å•é¡Œ 1: GeminiAPIWrapper æœªå¯¦éš›èª¿ç”¨ API

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | API Key + æç¤ºè© | åŒå·¦ |
| è™•ç†é‚è¼¯ | èª¿ç”¨ Gemini API ä¸¦å…§å»ºæŒ‡æ•¸é€€é¿é‡è©¦ | åªåŸ·è¡Œ setTimeout 3-5ç§’æ¨¡æ“¬å»¶é²ï¼Œè¿”å›ç¡¬ç·¨ç¢¼ mock æ•¸æ“š |
| é æœŸè¼¸å‡º | AI çœŸå¯¦åˆ†æçµæœ | å›ºå®šçš„æ¨¡æ“¬çµæœ (score éš¨æ©Ÿ 6.0-8.5) |
| é‚Šç•Œæ¢ä»¶ | ç¶²è·¯éŒ¯èª¤æ™‚é‡è©¦ï¼Œæœ€çµ‚å¤±æ•—é¡¯ç¤ºéŒ¯èª¤ | æ°¸é æˆåŠŸï¼Œé‡è©¦æ©Ÿåˆ¶å¾æœªè§¸ç™¼ |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
// å°‡æ¨¡æ“¬èª¿ç”¨æ›¿æ›ç‚ºçœŸå¯¦ Gemini API èª¿ç”¨
async call(prompt, structure = false) {
    if (!this.apiKey) {
        throw new Error("API Key not set.");
    }
    
    const endpoint = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${this.apiKey}`;
    
    let lastError = null;
    for (let i = 0; i < this.retryDelays.length; i++) {
        try {
            app.showToast(`${I18N[app.state.language].toast_processing} (Attempt ${i + 1})`);
            
            const response = await fetch(endpoint, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: structure ? { responseMimeType: "application/json" } : {}
                })
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            
            const data = await response.json();
            const text = data.candidates?.[0]?.content?.parts?.[0]?.text || '';
            
            if (structure) {
                // æ¸…ç† markdown åœæ¬„ä¸¦è§£æ JSON
                const cleanJson = text.replace(/```json\n?|\n?```/g, '').trim();
                return JSON.parse(cleanJson);
            }
            return text;
            
        } catch (error) {
            lastError = error;
            console.warn(`API call failed, retrying in ${this.retryDelays[i]}ms.`, error);
            await new Promise(resolve => setTimeout(resolve, this.retryDelays[i]));
        }
    }
    throw new Error(I18N[app.state.language].toast_api_error + (lastError ? lastError.message : ''));
}
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- ä½¿ç”¨ `fetch` å¯¦éš›ç™¼é€ HTTP è«‹æ±‚åˆ° Gemini API
- ä¿ç•™åŸæœ‰çš„æŒ‡æ•¸é€€é¿é‡è©¦æ©Ÿåˆ¶ï¼Œä½†ç¾åœ¨æœƒåœ¨çœŸæ­£çš„ç¶²è·¯éŒ¯èª¤æ™‚è§¸ç™¼
- æ”¯æ´çµæ§‹åŒ– JSON è¼¸å‡ºï¼ˆä½¿ç”¨ `responseMimeType`ï¼‰
- æ¸…ç† Markdown åœæ¬„ä»¥æ­£ç¢ºè§£æ JSON éŸ¿æ‡‰

---

## ğŸ”´ å•é¡Œ 2: é®ç½©é€æ˜åº¦æè¿°èˆ‡å¯¦ç¾ä¸ç¬¦

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | isRevealed === false | åŒå·¦ |
| è™•ç†é‚è¼¯ | åŸæ–‡è¢« 95% é€æ˜åº¦ï¼ˆå¹¾ä¹çœ‹ä¸è¦‹ï¼‰é®ç½©è¦†è“‹ | bg-opacity-95 = 95% ä¸é€æ˜ï¼ˆåªé€ 5%ï¼‰ |
| é æœŸè¼¸å‡º | ç”¨æˆ¶å¹¾ä¹å®Œå…¨çœ‹ä¸åˆ°åŸæ–‡ | ç”¨æˆ¶å¹¾ä¹å®Œå…¨çœ‹ä¸åˆ°åŸæ–‡ï¼ˆæ„å¤–æ­£ç¢ºï¼‰ |
| é‚Šç•Œæ¢ä»¶ | - | è¦æ ¼æè¿°èˆ‡ Tailwind èªç¾©ç›¸å |

### ä¿®æ­£æ–¹æ¡ˆ
```html
<!-- åŸä»£ç¢¼ (line 978) -->
<div class="absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-95 ...">

<!-- æ­¤è™•å¯¦éš›æ•ˆæœç¬¦åˆé æœŸï¼ˆå¹¾ä¹å®Œå…¨é®ä½ï¼‰ï¼Œä½†è¦æ ¼æè¿°æœ‰èª¤ -->
<!-- è‹¥æœªä¾†è¦æ ¼è¢«ä¿®æ­£ç‚ºã€Œ5% é€æ˜åº¦ã€ï¼Œå‰‡ç„¡éœ€æ”¹ç¢¼ -->
<!-- è‹¥éœ€åš´æ ¼éµå¾ªã€Œ95% é€æ˜åº¦ã€ï¼Œå‰‡æ‡‰æ”¹ç‚º -->
<div class="absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-5 ...">
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- é€™æ˜¯ä¸€å€‹**è¦æ ¼æ–‡ä»¶çš„æ–‡å­—æè¿°å•é¡Œ**ï¼Œä¸æ˜¯ç¨‹å¼ç¢¼å•é¡Œ
- `bg-opacity-95` è¡¨ç¤ºèƒŒæ™¯è‰²æœ‰ 95% ä¸é€æ˜åº¦ï¼ˆ5% é€æ˜ï¼‰ï¼Œé€™å¯¦éš›ä¸Šä½¿åŸæ–‡ã€Œå¹¾ä¹çœ‹ä¸è¦‹ã€
- è¦æ ¼æ–‡ä»¶å¯«çš„ã€Œ95% é€æ˜åº¦ã€èªç¾©ä¸Šç­‰æ–¼ `bg-opacity-5`ï¼ˆ95% é€æ˜ = 5% ä¸é€æ˜ï¼‰
- å»ºè­°ï¼š**ä¿®æ­£è¦æ ¼æ–‡ä»¶**ï¼Œå°‡ã€Œ95% é€æ˜åº¦ã€æ”¹ç‚ºã€Œ95% ä¸é€æ˜åº¦ã€æˆ–ã€Œbg-opacity-95ã€

---

## ğŸ”´ å•é¡Œ 3: Timer æŒ‰éˆ•äº‹ä»¶ç›£è½å™¨åœ¨é‡æ–°æ¸²æŸ“å¾Œä¸Ÿå¤±

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | è¡åˆºç‹€æ…‹è®ŠåŒ– | åŒå·¦ |
| è™•ç†é‚è¼¯ | æŒ‰éˆ•ç‹€æ…‹åˆ‡æ›æ™‚ä¿æŒäº‹ä»¶éŸ¿æ‡‰ | initSprintListeners() åœ¨ renderContent() å¾Œåªèª¿ç”¨ä¸€æ¬¡ï¼Œä½† updateSprintUI() ä¸é‡æ–°ç¶å®šäº‹ä»¶ |
| é æœŸè¼¸å‡º | Pause/Resume æŒ‰éˆ•å§‹çµ‚å¯é»æ“Š | å¯èƒ½å›  DOM é‡æ–°æ¸²æŸ“å°è‡´äº‹ä»¶ä¸Ÿå¤± |
| é‚Šç•Œæ¢ä»¶ | å¿«é€Ÿé»æ“Šæˆ–ç‹€æ…‹é »ç¹è®ŠåŒ– | æŒ‰éˆ•å¯èƒ½å¤±å»éŸ¿æ‡‰ |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
// æ–¹æ¡ˆ A: ä½¿ç”¨äº‹ä»¶å§”æ´¾ï¼ˆæ¨è–¦ï¼‰
// åœ¨ init() ä¸­æ·»åŠ ä¸€æ¬¡æ€§äº‹ä»¶å§”æ´¾
document.getElementById('content-container').addEventListener('click', (e) => {
    const target = e.target.closest('button');
    if (!target) return;
    
    if (target.id === 'sprint-start-btn') app.startTimer();
    if (target.id === 'sprint-pause-btn') app.pauseTimer();
    if (target.id === 'sprint-resume-btn') app.startTimer();
    if (target.id === 'sprint-submit-btn') app.performAction(app.handleSprintSubmission);
});

// ç„¶å¾Œç§»é™¤ initSprintListeners ä¸­çš„é‡è¤‡ç¶å®š
app.initSprintListeners = function() {
    document.getElementById('essay-input')?.addEventListener('input', (e) => {
        app.checkVerbUsage(e.target.value);
    });
    // æŒ‰éˆ•äº‹ä»¶å·²é€šéäº‹ä»¶å§”æ´¾è™•ç†
};
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- äº‹ä»¶å§”æ´¾å°‡ç›£è½å™¨ç¶å®šåˆ°çˆ¶å®¹å™¨ `#content-container`ï¼Œè€Œéå‹•æ…‹ç”Ÿæˆçš„æŒ‰éˆ•
- ç„¡è«–æŒ‰éˆ• DOM å¦‚ä½•é‡æ–°æ¸²æŸ“ï¼Œäº‹ä»¶å§‹çµ‚èƒ½è¢«æ•ç²
- æ¸›å°‘äº‹ä»¶ç›£è¯å™¨æ•¸é‡ï¼Œæå‡æ•ˆèƒ½

---

## ğŸ”´ å•é¡Œ 4: updateUI() ç ´å£æŒ‰éˆ•åŸå§‹æ–‡å­—

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | isProcessing = true/false | åŒå·¦ |
| è™•ç†é‚è¼¯ | ç¦ç”¨æŒ‰éˆ•ä¸¦é¡¯ç¤º loadingï¼Œå®Œæˆå¾Œæ¢å¾©åŸç‹€ | innerHTML è¢«è¦†å¯«ç‚º spinnerï¼Œdataset.originalText å‚™ä»½å¯èƒ½èˆ‡ DOM ä¸åŒæ­¥ |
| é æœŸè¼¸å‡º | æŒ‰éˆ•æ–‡å­—æ­£ç¢ºæ¢å¾© | å¯èƒ½æ¢å¾©ç‚ºéæ™‚çš„æ–‡å­—ï¼Œæˆ–å›  UI é‡æ–°æ¸²æŸ“ä¸Ÿå¤±å‚™ä»½ |
| é‚Šç•Œæ¢ä»¶ | å¿«é€Ÿé€£çºŒæ“ä½œã€èªè¨€åˆ‡æ› | æŒ‰éˆ•å¯èƒ½é¡¯ç¤ºéŒ¯èª¤æ–‡å­— |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
// æ”¹é€² updateUI() ä¸­çš„æŒ‰éˆ•è™•ç†
app.updateUI = function() {
    const processing = app.state.isProcessing;
    document.querySelectorAll('button[data-action-btn]').forEach(btn => {
        // åªè™•ç†æ¨™è¨˜ç‚º action çš„æŒ‰éˆ•
        const i18nKey = btn.getAttribute('data-i18n');
        const originalText = i18nKey ? I18N[app.state.language][i18nKey] : btn.textContent;
        
        if (processing) {
            btn.setAttribute('disabled', 'true');
            if (!btn.dataset.isLoading) {
                btn.dataset.isLoading = 'true';
                btn.dataset.originalHtml = btn.innerHTML;
                btn.innerHTML = `<svg class="animate-spin ...">...</svg> ${I18N[app.state.language].toast_processing}`;
            }
        } else if (btn.dataset.isLoading === 'true') {
            btn.removeAttribute('disabled');
            btn.innerHTML = btn.dataset.originalHtml || originalText;
            delete btn.dataset.isLoading;
            delete btn.dataset.originalHtml;
        }
    });
    // ... å…¶é¤˜ tab-specific æ›´æ–°
};
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- ä½¿ç”¨ `data-action-btn` æ¨™è¨˜éœ€è¦ loading è™•ç†çš„æŒ‰éˆ•ï¼Œé¿å…å½±éŸ¿è¨­å®šæŒ‰éˆ•
- å‚™ä»½å®Œæ•´çš„ `innerHTML` è€Œé `textContent`ï¼Œä¿ç•™æŒ‰éˆ•å…§éƒ¨çµæ§‹ï¼ˆå¦‚åœ–ç¤ºï¼‰
- ä½¿ç”¨ `data-isLoading` æ¨™èªŒé¿å…é‡è¤‡è™•ç†
- å¾ i18n å­—å…¸å‹•æ…‹ç²å–æ–‡å­—ï¼Œç¢ºä¿èªè¨€åˆ‡æ›å¾Œæ–‡å­—æ­£ç¢º

---

## ğŸ”´ å•é¡Œ 5: é›·é”åœ–ä½¿ç”¨ç¡¬ç·¨ç¢¼å€¼

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | ç”¨æˆ¶æ­·å²ç·´ç¿’æ•¸æ“š | åŒå·¦ + ç¡¬ç·¨ç¢¼å¸¸æ•¸ |
| è™•ç†é‚è¼¯ | 4 è»¸æ•¸æ“šå‡åŸºæ–¼å¯¦éš›ç·´ç¿’è¡¨ç¾ | Cohesion (C=7) å’Œ Task Response (T=8) ç‚ºå¸¸æ•¸ |
| é æœŸè¼¸å‡º | åæ˜ çœŸå¯¦èƒ½åŠ›çš„é›·é”åœ– | éƒ¨åˆ†æ•¸æ“šä¸åæ˜ å¯¦éš›è¡¨ç¾ |
| é‚Šç•Œæ¢ä»¶ | - | ç”¨æˆ¶å¯èƒ½èª¤ä»¥ç‚º Cohesion/Task è©•ä¼°æ˜¯çœŸå¯¦çš„ |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
app.renderRadarChart = function() {
    const history = app.state.history.filter(h => h.score);
    
    if (history.length === 0) {
        // ç„¡æ•¸æ“šæ™‚é¡¯ç¤ºæç¤º
        chartContainer.innerHTML = '<p class="text-center text-gray-500">No data available yet.</p>';
        return;
    }
    
    // åŸºæ–¼å¯¦éš›æ•¸æ“šè¨ˆç®—å„ç¶­åº¦ (ç°¡åŒ–ç¤ºä¾‹)
    const avgScore = history.reduce((sum, h) => sum + h.score, 0) / history.length;
    const { passive, omission } = app.calculateBottleneckIndex();
    
    // V: Vocabulary - åŸºæ–¼éºæ¼ç‡åæ¨ (omission è¶Šä½ï¼ŒV è¶Šé«˜)
    const V = Math.min(10, 10 - (omission || 0));
    // S: Structure - åŸºæ–¼è¢«å‹•èªæ…‹æ¯”ä¾‹
    const S = Math.min(10, passive || 0);
    // T: Task Response - åŸºæ–¼å¹³å‡åˆ†æ•¸ (6-9 æ˜ å°„åˆ° 6-10)
    const T = Math.min(10, Math.max(0, (avgScore - 5) * 2.5));
    // C: Cohesion - åŸºæ–¼å­—æ•¸ç©©å®šæ€§ï¼ˆç¤ºä¾‹: ä½¿ç”¨å¹³å‡å­—æ•¸/250 * 10ï¼‰
    const avgWords = history.reduce((sum, h) => sum + (h.words || 0), 0) / history.length;
    const C = Math.min(10, avgWords / 25);
    
    // ... ç¹¼çºŒç¹ªè£½
};
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- æ‰€æœ‰é›·é”åœ–ç¶­åº¦éƒ½åŸºæ–¼ç”¨æˆ¶å¯¦éš›ç·´ç¿’æ•¸æ“šè¨ˆç®—
- Task Response åŸºæ–¼ AI é ä¼°åˆ†æ•¸
- Cohesion åŸºæ–¼å­—æ•¸ç©©å®šæ€§ï¼ˆæˆ–å¯æ”¹ç”¨å…¶ä»–æŒ‡æ¨™ï¼‰
- ç„¡æ•¸æ“šæ™‚é¡¯ç¤ºå‹å¥½æç¤ºï¼Œé¿å…èª¤å°

---

## ğŸŸ¡ å•é¡Œ 6: Settings Modal é»æ“Šå¤–éƒ¨ä¸é—œé–‰

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | é»æ“Š modal å¤–éƒ¨å€åŸŸ | åŒå·¦ |
| è™•ç†é‚è¼¯ | é—œé–‰ modalï¼ˆç¬¦åˆå¸¸è¦‹ UX æ…£ä¾‹ï¼‰ | ç„¡ä»»ä½•åæ‡‰ |
| é æœŸè¼¸å‡º | modal æ¶ˆå¤± | modal ä¿æŒé¡¯ç¤º |
| é‚Šç•Œæ¢ä»¶ | - | - |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
// åœ¨ init() ä¸­æ·»åŠ 
document.getElementById('settings-modal').addEventListener('click', (e) => {
    // åªæœ‰é»æ“Šé®ç½©å€åŸŸï¼ˆéå…§å®¹å€ï¼‰æ‰é—œé–‰
    if (e.target.id === 'settings-modal' || e.target.classList.contains('bg-opacity-75')) {
        document.getElementById('settings-modal').classList.add('hidden');
    }
});
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- ç›£è½æ•´å€‹ modal å®¹å™¨çš„é»æ“Šäº‹ä»¶
- ä½¿ç”¨ `e.target` åˆ¤æ–·ï¼šåªæœ‰é»æ“Šé®ç½©èƒŒæ™¯æ™‚æ‰é—œé–‰ï¼Œé»æ“Šå…§å®¹å€åŸŸæ™‚äº‹ä»¶ä¸æœƒè§¸ç™¼é—œé–‰
- ç¬¦åˆç”¨æˆ¶å° modal çš„æ“ä½œé æœŸ

---

## ğŸŸ¡ å•é¡Œ 7: æ­·å²è¨˜éŒ„å¯èƒ½è¶…é 10 æ¢

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | history é™£åˆ— | åŒå·¦ |
| è™•ç†é‚è¼¯ | åªé¡¯ç¤ºæœ€è¿‘ 10 æ¢ | renderHistoryTable é¡¯ç¤ºæ‰€æœ‰è¨˜éŒ„ |
| é æœŸè¼¸å‡º | è¡¨æ ¼æœ€å¤š 10 è¡Œ | å¯èƒ½è¶…é 10 è¡Œ |
| é‚Šç•Œæ¢ä»¶ | èˆŠ state éºç•™è¶…é 10 æ¢è¨˜éŒ„ | å…¨éƒ¨é¡¯ç¤º |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
app.renderHistoryTable = function() {
    const lang = app.state.language;
    const history = app.state.history.slice(0, 10); // ç¢ºä¿åªå–å‰ 10 æ¢
    // ... å…¶é¤˜ä»£ç¢¼ä¸è®Š
};
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- åœ¨æ¸²æŸ“æ™‚å†æ¬¡é™åˆ¶ç‚º 10 æ¢ï¼Œç„¡è«– state ä¸­å¯¦éš›æœ‰å¤šå°‘è¨˜éŒ„
- é˜²ç¦¦æ€§ç·¨ç¨‹ï¼Œç¢ºä¿é¡¯ç¤ºæ°¸é ç¬¦åˆè¦æ ¼

---

## ğŸŸ¡ å•é¡Œ 8: intervalId è¢«æŒä¹…åŒ–ä½†ä¸å¯æ¢å¾©

| ç¶­åº¦ | ä½ çš„æ„åœ–ï¼ˆæ‡‰æœ‰çš„æ¨£å­ï¼‰ | ç¾ç‹€ï¼ˆç¨‹å¼ç¢¼å¯¦éš›çš„è¡¨ç¾ï¼‰ |
|---|---|---|
| è¼¸å…¥æ•¸æ“š | sprint.intervalId | åŒå·¦ |
| è™•ç†é‚è¼¯ | é é¢é‡è¼‰å¾Œæ¢å¾©è¨ˆæ™‚å™¨ | intervalId è¢«å­˜å„²ä½† setInterval ID ä¸å¯æ¢å¾© |
| é æœŸè¼¸å‡º | è¨ˆæ™‚å™¨å¾ä¸­æ–·è™•ç¹¼çºŒ | è¨ˆæ™‚å™¨ç‹€æ…‹ç‚º running ä½†æœªå¯¦éš›é‹è¡Œï¼Œç›´åˆ°å‘¼å« startTimer() |
| é‚Šç•Œæ¢ä»¶ | é é¢åˆ·æ–°æ™‚æ­£åœ¨è¨ˆæ™‚ | è¨ˆæ™‚å™¨æš«åœåœ¨åˆ·æ–°æ™‚çš„æ•¸å€¼ |

### ä¿®æ­£æ–¹æ¡ˆ
```javascript
// æ–¹æ¡ˆ: åœ¨ saveState å‰æ¸…ç©º intervalIdï¼ˆå®ƒä¸å¯æ¢å¾©ï¼‰
app.saveState = function() {
    const stateToSave = JSON.parse(JSON.stringify(app.state));
    stateToSave.sprint.intervalId = null; // ä¸å­˜å„²ä¸å¯æ¢å¾©çš„å€¼
    localStorage.setItem(STORAGE_KEY, JSON.stringify(stateToSave));
};

// init() ä¸­å·²æœ‰æ¢å¾©é‚è¼¯ï¼Œç¢ºä¿å…¶æ­£ç¢º
// (line 1421-1423)
if (app.state.sprint.status === 'running' && app.state.sprint.timer > 0) {
    app.startTimer();
}
```

**ç‚ºä»€éº¼é€™æ¨£æ”¹èƒ½è§£æ±ºå•é¡Œï¼š**
- é¿å…å­˜å„²ç„¡æ•ˆçš„ intervalId
- ç¾æœ‰çš„ init() é‚è¼¯å·²æœƒåœ¨ status ç‚º running æ™‚è‡ªå‹•å‘¼å« startTimer()ï¼Œç¢ºä¿è¨ˆæ™‚å™¨æ¢å¾©
- ä¿æŒç¨‹å¼ç¢¼æ„åœ–æ¸…æ™°

---

## å•é¡Œç¸½çµè¡¨

| # | å•é¡Œé¡å‹ | åš´é‡ç¨‹åº¦ | å½±éŸ¿ç¯„åœ | ä¿®æ­£é›£åº¦ |
|---|---|---|---|---|
| 1 | API æœªå¯¦éš›èª¿ç”¨ | ğŸ”´ é«˜ | æ‰€æœ‰ AI åŠŸèƒ½ | ä¸­ |
| 2 | é®ç½©é€æ˜åº¦æè¿° | ğŸŸ¢ ä½ | æ–‡ä»¶/èªç¾© | ä½ |
| 3 | äº‹ä»¶ç›£è½å™¨ä¸Ÿå¤± | ğŸ”´ é«˜ | è¨ˆæ™‚å™¨æ§åˆ¶ | ä¸­ |
| 4 | æŒ‰éˆ•æ–‡å­—æ¢å¾© | ğŸŸ¡ ä¸­ | UI ç©©å®šæ€§ | ä¸­ |
| 5 | é›·é”åœ–ç¡¬ç·¨ç¢¼ | ğŸŸ¡ ä¸­ | æ•¸æ“šæº–ç¢ºæ€§ | ä½ |
| 6 | Modal é—œé–‰æ–¹å¼ | ğŸŸ¢ ä½ | UX | ä½ |
| 7 | æ­·å²è¨˜éŒ„æ•¸é‡ | ğŸŸ¢ ä½ | æ•¸æ“šé¡¯ç¤º | ä½ |
| 8 | intervalId æŒä¹…åŒ– | ğŸŸ¢ ä½ | ç‹€æ…‹æ¢å¾© | ä½ |
