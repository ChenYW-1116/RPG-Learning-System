# ğŸ” Skills ç³»çµ±åŸ·è¡Œæµç¨‹åˆ†æå ±å‘Š

æœ¬æ–‡æª”è©³ç´°èªªæ˜ Spec Kit Agent ä¸­ Skills ç³»çµ±çš„é‹ä½œæ©Ÿåˆ¶å’Œ LLM é€šä¿¡æµç¨‹ã€‚

---

## ğŸ“Š ç³»çµ±æ¶æ§‹æ¦‚è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SPEC KIT AGENT åŸ·è¡Œæµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 ç”¨æˆ¶è¼¸å…¥éœ€æ±‚
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 0:        â”‚ â”€â”€â–¶ â”‚  Phase 1:        â”‚ â”€â”€â–¶ â”‚  Phase 2:        â”‚
â”‚  ç³»çµ±è¨ºæ–·        â”‚     â”‚  æŠ€èƒ½ç™¼ç¾        â”‚     â”‚  Prompt æ§‹å»º     â”‚
â”‚  (Diagnostics)   â”‚     â”‚  (Skill Disc.)   â”‚     â”‚  (Prompt Build)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                          â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3:        â”‚ â”€â”€â–¶ â”‚  Phase 4:        â”‚ â”€â”€â–¶ â”‚  Phase 5:        â”‚
â”‚  API è«‹æ±‚        â”‚     â”‚  ä»£ç¢¼æå–        â”‚     â”‚  å„ªåŒ–å¾ªç’°        â”‚
â”‚  (LLM Call)      â”‚     â”‚  (Extraction)    â”‚     â”‚  (Opt. Loop)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Phase 1: æŠ€èƒ½ç™¼ç¾ (Skill Discovery)

### åŸ·è¡Œä½ç½®
- **æ–‡ä»¶**: `modules/code-generator.js`
- **æ–¹æ³•**: `SkillInjector.loadMandatorySkills()`

### åŸ·è¡Œæµç¨‹

```javascript
// 1. å®šç¾©å¼·åˆ¶è¼‰å…¥çš„æŠ€èƒ½æ¸…å–®
const criticalSkillNames = [
    'spec-app-runtime-hardening',     // é€šç”¨å¼·åŒ– (åœ¨ openclaw-main)
    'spec-kit-compliance-checker',    // åˆè¦æª¢æŸ¥ (åœ¨ openclaw-main)
    'gemini-api-wrapper',             // API èª¿ç”¨å±¤ (åœ¨ .agent/skills)
    'ai-essay-analyzer',              // ç¯„æ–‡åˆ†æ (åœ¨ .agent/skills)
    'ai-blind-write-diagnosis',       // ç›²å¯«è¨ºæ–· (åœ¨ .agent/skills)
    // ... æ›´å¤š
];

// 2. èª¿ç”¨ Bridge Server åˆ—å‡ºå¯ç”¨æŠ€èƒ½
const allSkills = await listSkills(); // POST /fs/list-skills

// 3. é€å€‹è¼‰å…¥æŠ€èƒ½å…§å®¹
for (const name of skillNames) {
    const skill = allSkills.find(s => s.name === name);
    if (skill) {
        const content = await loadSkillContent(skill.path); // POST /fs/read-file
        // å¼·èª¿è† æ°´ä»£ç¢¼
        const enhanced = _highlightGlueCode(content, skill.name);
        skillContent += enhanced;
    }
}
```

### Console è¼¸å‡ºç¤ºä¾‹

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”Œ SKILL DISCOVERY éšæ®µé–‹å§‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¾…è¼‰å…¥æŠ€èƒ½æ¸…å–® (11 å€‹):
  [1] spec-app-runtime-hardening
  [2] spec-kit-compliance-checker
  ...
ğŸ“‚ Bridge Server è¿”å› 6 å€‹å¯ç”¨æŠ€èƒ½
âš ï¸ æŠ€èƒ½æœªæ‰¾åˆ°: spec-app-runtime-hardening
âš ï¸ æŠ€èƒ½æœªæ‰¾åˆ°: spec-kit-compliance-checker
âœ… é–å®šæŠ€èƒ½æ¨¡çµ„: gemini-api-wrapper
   ğŸ“‚ Path: .agent/skills/gemini-api-wrapper/SKILL.md
   ğŸ“ Content: 2.34 KB (2398 chars)
   ğŸ”— è† æ°´ä»£ç¢¼: âœ“ å·²è­˜åˆ¥
âœ… é–å®šæŠ€èƒ½æ¨¡çµ„: ai-essay-analyzer
   ğŸ“‚ Path: .agent/skills/ai-essay-analyzer/SKILL.md
   ğŸ“ Content: 4.39 KB (4499 chars)
   ğŸ”— è† æ°´ä»£ç¢¼: âœ“ å·²è­˜åˆ¥
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… æŠ€èƒ½è¼‰å…¥å®Œæˆ: 6/11 å€‹æˆåŠŸ
ğŸ“¦ ç¸½æŠ€èƒ½å…§å®¹å¤§å°: 18.52 KB
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ“ Phase 2: Prompt æ§‹å»º (Prompt Build)

### åŸ·è¡Œä½ç½®
- **æ–‡ä»¶**: `modules/code-generator.js`
- **æ–¹æ³•**: `PromptBuilder.buildImplementPrompt()`

### Prompt çµ„æˆçµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            æœ€çµ‚ PROMPT çµæ§‹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. TEMPLATE (å‘½ä»¤æ¨¡æ¿)                                                        â”‚
â”‚    ä¾†æº: SDD_COMMANDS.implement.prompt                                        â”‚
â”‚    å…§å®¹: è§’è‰²å®šç¾©ã€åŸ·è¡Œæµç¨‹ã€è¼¸å‡ºè¦æ±‚ç­‰                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. CONTEXT INJECTION (ä¸Šä¸‹æ–‡æ³¨å…¥)                                             â”‚
â”‚    {CONSTITUTION} â†’ state.constitutionMarkdown                               â”‚
â”‚    {ANALYSIS}     â†’ state.analysisMarkdown                                   â”‚
â”‚    {CHECKLIST}    â†’ state.checklistMarkdown                                  â”‚
â”‚    {PLAN}         â†’ state.planMarkdown                                       â”‚
â”‚    {TASKS}        â†’ state.tasksMarkdown                                      â”‚
â”‚    {SPEC}         â†’ state.specMarkdown                                       â”‚
â”‚    {TEST_SCRIPT}  â†’ state.testCode                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. SKILLS CONTENT (æŠ€èƒ½å…§å®¹)                                                  â”‚
â”‚    æ ¼å¼:                                                                      â”‚
â”‚    # ğŸ›¡ï¸ MANDATORY SKILL: gemini-api-wrapper                                  â”‚
â”‚    [SKILL.md å…¨æ–‡]                                                            â”‚
â”‚    <!-- âš ï¸ @GLUE:REQUIRED -->                                                â”‚
â”‚    [è† æ°´ä»£ç¢¼éƒ¨åˆ†]                                                              â”‚
â”‚    <!-- âš ï¸ END @GLUE:REQUIRED -->                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. GLUE CONTRACT PROMPT (è† æ°´åˆç´„)                                            â”‚
â”‚    # ğŸ”— SKILL GLUE CODE CHECKLIST (MANDATORY)                                â”‚
â”‚    ## Loaded Skills Checklist:                                               â”‚
â”‚       - [ ] `gemini-api-wrapper`: é¡åˆ¥å¯¦ä¾‹åŒ– + äº‹ä»¶ç¶å®š + i18n Keys           â”‚
â”‚       - [ ] `ai-essay-analyzer`: ...                                         â”‚
â”‚    ## ğŸš« ANTI-SKIP PROTOCOL                                                  â”‚
â”‚    (é˜²æ­¢ LLM è·³éè† æ°´ä»£ç¢¼å¯¦ç¾)                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Console è¼¸å‡ºç¤ºä¾‹

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ PROMPT æ§‹å»ºéšæ®µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ä¸Šä¸‹æ–‡çµ„ä»¶:
   ğŸ“„ Template: 3.2 KB
   ğŸ“„ Spec: 2.1 KB
   ğŸ“‹ Plan: 1.8 KB
   âœ… Tasks: 1.5 KB
   ğŸ“œ Constitution: 2.3 KB
   ğŸ” Analysis: 1.2 KB
   âœ“ Checklist: 0.8 KB
   ğŸ§ª Test Script: 3.5 KB
   ğŸ”Œ Skills: 18.5 KB

ğŸ“¦ æœ€çµ‚ Prompt çµ±è¨ˆ:
   ç¸½å¤§å°: 34.90 KB (35737 chars)
   é ä¼° Tokens: ~8935

ğŸ“‹ Prompt é è¦½ (å‰ 500 å­—ç¬¦):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Role: é«˜ç´šå…¨ç«¯è»Ÿé«”æ¶æ§‹å¸« (Senior Full-Stack Architect)

## Context
æˆ‘ç¾åœ¨æä¾›ä¸€å€‹å°ˆæ¡ˆçš„å®Œæ•´è¦æ ¼æ–‡ä»¶é›†ï¼ŒåŒ…å«ï¼š
1. `CONSTITUTION.md`: å°ˆæ¡ˆæ†²æ³•ï¼ˆç¨‹å¼ç¢¼è¦ç¯„èˆ‡å“è³ªåŸå‰‡ï¼‰
...
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸŒ Phase 3: LLM API è«‹æ±‚ (API Request)

### åŸ·è¡Œä½ç½®
- **æ–‡ä»¶**: `spec-kit-sdd-core.js`
- **æ–¹æ³•**: `callKimi()`

### API è«‹æ±‚æµç¨‹

```javascript
// 1. æ±ºå®š Provider å’Œ Key
const currentConfig = resolveAIConfig(null, phase);
// phase: 'phase1' (è¦åŠƒç”¨ Kimi), 'phase2' (å¯¦ç¾ç”¨ Gemini), 'reverse' (å„ªåŒ–ç”¨ Gemini)

// 2. æ§‹å»ºè«‹æ±‚ Body
if (provider === 'gemini') {
    // Gemini Native Format
    requestBody = {
        contents: [
            { role: 'user', parts: [{ text: systemPrompt + '\n\n' + prompt }] }
        ],
        generationConfig: {
            temperature: 0.5,
            maxOutputTokens: 65536
        }
    };
} else {
    // OpenAI Format (for Kimi)
    requestBody = {
        model: activeModel,
        messages: [
            { role: 'system', content: systemPrompt },
            { role: 'user', content: prompt }
        ]
    };
}

// 3. ç™¼é€è«‹æ±‚
const response = await fetch(finalUrl, {
    method: 'POST',
    headers: headers,
    body: JSON.stringify(requestBody)
});

// 4. è§£æå›æ‡‰
// Gemini: data.candidates[0].content.parts[0].text
// OpenAI: data.choices[0].message.content
```

### Console è¼¸å‡ºç¤ºä¾‹

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŒ LLM API REQUEST éšæ®µ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Œ Request ID: REQ-123456
â±ï¸ è«‹æ±‚æ™‚é–“: 2026-02-05T20:26:08.123Z
ğŸ“ Prompt å¤§å°: 34.90 KB (35737 chars)
ğŸ¤– System Prompt: ä½ æ˜¯ä¸€å€‹å°ˆæ¥­çš„è»Ÿé«”å·¥ç¨‹å¸«...
ğŸ¯ Phase: phase2
ğŸ“ Provider: gemini
ğŸ¤– Model: gemini-2.5-flash-preview-09-2025
ğŸ”‘ API Key: AIzaSyBF2...r2l0
ğŸ“¡ URL: (Native Gemini Endpoint)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… API RESPONSE æˆåŠŸ (Gemini Format)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“¦ Response å¤§å°: 89.23 KB (91372 chars)
ğŸ¯ å›æ‡‰æ ¼å¼: Gemini

ğŸ“‹ Response é è¦½ (å‰ 300 å­—ç¬¦):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width...
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ” HTML çµæ§‹æª¢æŸ¥: é–‹é ­æ¨™ç±¤=âœ“, çµå°¾æ¨™ç±¤=âœ“
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Phase 5: å„ªåŒ–å¾ªç’° (Optimization Loop)

### åŸ·è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            OPTIMIZATION LOOP                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        Initial HTML Code (Phase 0 è¼¸å‡º)
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: HTML â†’ Spec                   â”‚
â”‚  ä½¿ç”¨ reverse.md æŠ€èƒ½                    â”‚
â”‚  å°‡ä»£ç¢¼é€†å‘å·¥ç¨‹ç‚ºè¦æ ¼æ–‡æª”                  â”‚
â”‚  è¼¸å‡º: reverseSpec                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: Spec â†’ HTML                   â”‚
â”‚  ğŸ†• ä½¿ç”¨ Skill Agent (Function Calling) â”‚
â”‚  LLM å‹•æ…‹æŸ¥è©¢å’Œèª¿åº¦æŠ€èƒ½                   â”‚
â”‚  ç¢ºä¿ä»£ç¢¼ç„¡ç¸«æ¥è»Œ                         â”‚
â”‚  è¼¸å‡º: optimizedCode                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        Final Optimized HTML Code
```

---

## ğŸ¤– NEW: Skill Agent Function Calling ç³»çµ±

### æ ¸å¿ƒæ¦‚å¿µ

**Skill Agent** æ˜¯ä¸€å€‹è®“ LLM èƒ½å¤ å‹•æ…‹æŸ¥è©¢å’Œèª¿åº¦æŠ€èƒ½çš„ç³»çµ±ã€‚LLM å¯ä»¥ï¼š

1. **æŸ¥è©¢å¯ç”¨æŠ€èƒ½** - äº†è§£æœ‰å“ªäº›åŠŸèƒ½æ¨¡çµ„å¯ç”¨
2. **æŒ‰éœ€è¼‰å…¥æŠ€èƒ½** - åªè¼‰å…¥éœ€è¦çš„æŠ€èƒ½å…§å®¹
3. **ç²å–è† æ°´ä»£ç¢¼** - ç²å–å¿…é ˆå¯¦ç¾çš„æ•´åˆä»£ç¢¼
4. **é©—è­‰æ•´åˆ** - ç¢ºä¿ä»£ç¢¼æ­£ç¢ºæ•´åˆäº†æ‰€æœ‰æŠ€èƒ½
5. **æäº¤æœ€çµ‚ä»£ç¢¼** - é©—è­‰é€šéå¾Œæäº¤

### LLM å¯èª¿ç”¨çš„å‡½æ•¸

| å‡½æ•¸åç¨± | æè¿° | åƒæ•¸ |
|---------|------|------|
| `list_available_skills` | åˆ—å‡ºæ‰€æœ‰å¯ç”¨æŠ€èƒ½ | `category?`: é¡åˆ¥éæ¿¾ |
| `load_skill_content` | è¼‰å…¥æŠ€èƒ½å®Œæ•´å…§å®¹ | `skill_name`: æŠ€èƒ½åç¨± |
| `get_skill_glue_code` | ç²å–è† æ°´ä»£ç¢¼ç‰‡æ®µ | `skill_name`: æŠ€èƒ½åç¨± |
| `get_skill_dependencies` | ç²å–æŠ€èƒ½ä¾è³´é—œä¿‚ | `skill_name`: æŠ€èƒ½åç¨± |
| `validate_glue_integration` | é©—è­‰ä»£ç¢¼æ•´åˆ | `code`, `used_skills` |
| `finalize_code` | æäº¤æœ€çµ‚ä»£ç¢¼ | `final_code`, `integrated_skills` |

### Agent å¾ªç’°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SKILL AGENT LOOP                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ é–‹å§‹ä»»å‹™     â”‚
    â”‚ (Spec è¼¸å…¥)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ LLM èª¿ç”¨ list_available_skills()    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æŸ¥çœ‹æœ‰å“ªäº›å¯ç”¨æŠ€èƒ½                    â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                                                       â”‚
           â–¼                                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚ LLM æ±ºå®šéœ€è¦å“ªäº›æŠ€èƒ½                  â”‚                       â”‚
    â”‚ èª¿ç”¨ load_skill_content(skill_name)  â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                                                       â”‚
           â–¼                                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚ LLM æª¢æŸ¥ä¾è³´é—œä¿‚                      â”‚                       â”‚
    â”‚ èª¿ç”¨ get_skill_dependencies()        â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                                                       â”‚
           â–¼                                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚ LLM ç²å–è† æ°´ä»£ç¢¼                      â”‚                       â”‚
    â”‚ èª¿ç”¨ get_skill_glue_code()           â”‚          Multi-Turn   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          Loop         â”‚
           â”‚                                          (æœ€å¤š 15 è¼ª) â”‚
           â–¼                                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚ LLM ç”Ÿæˆä»£ç¢¼                          â”‚                       â”‚
    â”‚ æ•´åˆè† æ°´ä»£ç¢¼åˆ°å¯¦ç¾ä¸­                   â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                                                       â”‚
           â–¼                                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚ LLM èª¿ç”¨ validate_glue_integration() â”‚                       â”‚
    â”‚ é©—è­‰æ‰€æœ‰æŠ€èƒ½éƒ½å·²æ­£ç¢ºæ•´åˆ               â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
           â”‚                                                       â”‚
           â”‚ é©—è­‰å¤±æ•—?â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ é©—è­‰é€šé â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ LLM èª¿ç”¨ finalize_code()             â”‚
    â”‚ æäº¤æœ€çµ‚ä»£ç¢¼                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è¼¸å‡ºæœ€çµ‚ä»£ç¢¼  â”‚
    â”‚ + æ•´åˆçš„æŠ€èƒ½  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»£ç¢¼ç„¡ç¸«æ¥è»Œé©—è­‰

Skill Agent é€šéä»¥ä¸‹æ©Ÿåˆ¶ç¢ºä¿ä»£ç¢¼ç„¡ç¸«æ¥è»Œï¼š

#### 1. é¡åˆ¥å¯¦ä¾‹åŒ–æª¢æŸ¥
```javascript
// è† æ°´ä»£ç¢¼è¦æ±‚
const essayAnalyzer = new AIEssayAnalyzer(geminiApi);

// é©—è­‰å™¨æª¢æŸ¥
if (!code.includes('new AIEssayAnalyzer')) {
    issues.push('ç¼ºå°‘é¡åˆ¥å¯¦ä¾‹åŒ–: new AIEssayAnalyzer()');
}
```

#### 2. äº‹ä»¶ç¶å®šæª¢æŸ¥
```javascript
// è† æ°´ä»£ç¢¼è¦æ±‚
document.getElementById('analyzeBtn').addEventListener('click', ...)

// é©—è­‰å™¨æª¢æŸ¥
if (!code.includes('analyzeBtn') || !code.includes('addEventListener')) {
    issues.push('ç¼ºå°‘äº‹ä»¶ç¶å®š: analyzeBtn.click');
}
```

#### 3. ä¾è³´é—œä¿‚æª¢æŸ¥
```javascript
// ai-essay-analyzer ä¾è³´ gemini-api-wrapper
if (usedSkills.includes('ai-essay-analyzer') && 
    !usedSkills.includes('gemini-api-wrapper')) {
    issues.push('ç¼ºå°‘ä¾è³´: ai-essay-analyzer éœ€è¦ gemini-api-wrapper');
}
```

### Console è¼¸å‡ºç¤ºä¾‹

```
ğŸ¤– Skill Agent å·²åˆå§‹åŒ–
ğŸ”„ Skill Agent Loop é–‹å§‹
ğŸ“ Iteration 1/15
ğŸ”§ Skill Agent åŸ·è¡Œ: list_available_skills
ğŸ“‹ æ‰¾åˆ° 70 å€‹æŠ€èƒ½
ğŸ“ Iteration 2/15
ğŸ”§ Skill Agent åŸ·è¡Œ: load_skill_content { skill_name: 'gemini-api-wrapper' }
ğŸ“¦ å¾ç·©å­˜è¼‰å…¥: gemini-api-wrapper
âœ… æŠ€èƒ½å·²è¼‰å…¥: gemini-api-wrapper (2.34 KB)
ğŸ“ Iteration 3/15
ğŸ”§ Skill Agent åŸ·è¡Œ: get_skill_glue_code { skill_name: 'ai-essay-analyzer' }
...
ğŸ“ Iteration 8/15
ğŸ”§ Skill Agent åŸ·è¡Œ: validate_glue_integration
âœ… é©—è­‰é€šéï¼æ‰€æœ‰ 3 å€‹æŠ€èƒ½éƒ½å·²æ­£ç¢ºæ•´åˆã€‚
ğŸ“ Iteration 9/15
ğŸ”§ Skill Agent åŸ·è¡Œ: finalize_code
âœ… ä»£ç¢¼å·²å®Œæˆ
âœ… Agent Loop çµæŸ (9 iterations)
```

---

## ğŸ“‚ é‡è¦æ–‡ä»¶çµæ§‹

```
C:\2026 Tasks\07. Empire\
â”œâ”€â”€ spec-kit-sdd-core.js          # ä¸»æ ¸å¿ƒæ–‡ä»¶ (ç‹€æ…‹ç®¡ç†, API èª¿ç”¨)
â”œâ”€â”€ spec-kit-bridge.js            # Bridge Server (Node.js æ–‡ä»¶ç³»çµ±è¨ªå•, é›™å±¤æŠ€èƒ½æƒæ)
â”‚
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ code-generator.js         # ä»£ç¢¼ç”Ÿæˆæ¨¡çµ„ (Prompt æ§‹å»º, æŠ€èƒ½æ³¨å…¥, å„ªåŒ–å¾ªç’°)
â”‚   â”œâ”€â”€ llm-debug-logger.js       # LLM Debug æ—¥èªŒæ¨¡çµ„
â”‚   â””â”€â”€ skill-agent.js            # ğŸ†• Skill Agent æ¨¡çµ„ (LLM Function Calling)
â”‚
â”œâ”€â”€ openclaw-main/
â”‚   â””â”€â”€ skills/                   # ğŸ¥ˆ Priority 2: é€šç”¨æŠ€èƒ½åº« (64 å€‹æŠ€èƒ½)
â”‚       â”œâ”€â”€ spec-app-runtime-hardening/
â”‚       â”œâ”€â”€ spec-kit-compliance-checker/
â”‚       â”œâ”€â”€ frontend-robust-boot/
â”‚       â””â”€â”€ ... (æ›´å¤šé€šç”¨æŠ€èƒ½)
â”‚
â””â”€â”€ .agent/
    â”œâ”€â”€ SKILL_REGISTRY.md         # æŠ€èƒ½è¨»å†Šè¡¨ (æ–‡æª”)
    â”œâ”€â”€ SKILL_EXECUTION_FLOW.md   # æœ¬æ–‡æª”
    â””â”€â”€ skills/                   # ğŸ¥‡ Priority 1: å°ˆæ¡ˆå°ˆå±¬æŠ€èƒ½ (6 å€‹æŠ€èƒ½)
        â”œâ”€â”€ gemini-api-wrapper/   # API èª¿ç”¨å°è£
        â”‚   â””â”€â”€ SKILL.md
        â”œâ”€â”€ ai-essay-analyzer/    # ç¯„æ–‡åˆ†æ
        â”‚   â””â”€â”€ SKILL.md
        â”œâ”€â”€ ai-blind-write-diagnosis/
        â”‚   â””â”€â”€ SKILL.md
        â”œâ”€â”€ ai-essay-rewriter/
        â”‚   â””â”€â”€ SKILL.md
        â”œâ”€â”€ ai-inspiration-generator/
        â”‚   â””â”€â”€ SKILL.md
        â””â”€â”€ ui-loader-manager/
            â””â”€â”€ SKILL.md
```

---

## ğŸ”§ ä½¿ç”¨ Debug Logger

ç¾åœ¨ä½ å¯ä»¥åœ¨ç€è¦½å™¨ Console ä¸­çœ‹åˆ°å®Œæ•´çš„ LLM é€šä¿¡éç¨‹ï¼š

1. **æŠ€èƒ½ç™¼ç¾éšæ®µ**: ç´«è‰²è¼¸å‡ºï¼Œé¡¯ç¤ºæ¯å€‹æŠ€èƒ½çš„è¼‰å…¥ç‹€æ…‹
2. **Prompt æ§‹å»ºéšæ®µ**: è—è‰²è¼¸å‡ºï¼Œé¡¯ç¤ºä¸Šä¸‹æ–‡çµ„ä»¶å’Œæœ€çµ‚ Prompt
3. **API è«‹æ±‚éšæ®µ**: ç¶ è‰²è¼¸å‡ºï¼Œé¡¯ç¤ºè«‹æ±‚åƒæ•¸å’Œå›æ‡‰å…§å®¹

å¦‚éœ€ä¸‹è¼‰å®Œæ•´æ—¥èªŒï¼š

```javascript
// åœ¨ç€è¦½å™¨ Console ä¸­åŸ·è¡Œ
CodeGenLogger.downloadLog('my-session.log');
```

---

## âœ… ç¸½çµ

| éšæ®µ | è² è²¬æ¨¡çµ„ | ä¸»è¦è¼¸å‡º |
|------|----------|----------|
| æŠ€èƒ½ç™¼ç¾ | `SkillInjector.loadMandatorySkills` | æŠ€èƒ½å…§å®¹ + è† æ°´ä»£ç¢¼æ¨™è¨˜ |
| Prompt æ§‹å»º | `PromptBuilder.buildImplementPrompt` | å®Œæ•´ Prompt (30-50 KB) |
| API è«‹æ±‚ | `callKimi` | HTML ä»£ç¢¼ (50-150 KB) |
| ä»£ç¢¼æå– | `CodeExtractor.extractHTML` | æ¸…ç†å¾Œçš„ HTML |
| å„ªåŒ–å¾ªç’° | `OptimizationLoop.execute` | å„ªåŒ–ç‰ˆ HTML |

